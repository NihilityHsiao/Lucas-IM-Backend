# Lucas-IM-Backend

主要技术: postgres + mongodb + etcd + redis + axum


# 缓存一致性
采用的是 先更新数据库,再删除缓存
如果线程 A 更新了数据库中的值，但还没来得及删除缓存中的值，线程 B 这时候开始读取数据，此时，线程 B 查询缓存时，命中了旧缓存
不过在这种场景下，如果并发请求量不高的话，其实基本上不会有线程读到旧值，而且线程 A 更新完数据库后，删除缓存是非常快的操作，所以，这种情况总体对业务影响较小。一般在生产环境中，也推荐大家采用该模式。


